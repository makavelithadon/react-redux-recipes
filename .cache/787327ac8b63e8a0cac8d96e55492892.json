{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":3,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":4,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":5,"column":22}},{"name":"lodash/invoke","loc":{"line":6,"column":20}},{"name":"prop-types","loc":{"line":8,"column":22}},{"name":"react","loc":{"line":9,"column":46}},{"name":"react-dom","loc":{"line":10,"column":21}},{"name":"../../lib","loc":{"line":12,"column":95}},{"name":"../Ref","loc":{"line":13,"column":16}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"babel-runtime/helpers/extends\"),o=y(e),r=require(\"babel-runtime/helpers/classCallCheck\"),t=y(r),n=require(\"babel-runtime/helpers/createClass\"),l=y(n),a=require(\"babel-runtime/helpers/possibleConstructorReturn\"),u=y(a),s=require(\"babel-runtime/helpers/inherits\"),i=y(s),p=require(\"lodash/invoke\"),c=y(p),d=require(\"prop-types\"),g=y(d),h=require(\"react\"),v=y(h),m=require(\"react-dom\"),f=y(m),T=require(\"../../lib\"),k=require(\"../Ref\"),N=y(k);function y(e){return e&&e.__esModule?e:{default:e}}var C=function(e){(0,i.default)(r,e);function r(){var e,n,l,a;(0,t.default)(this,r);for(var s=arguments.length,i=Array(s),p=0;p<s;p++)i[p]=arguments[p];return n=l=(0,u.default)(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),l.handleDocumentClick=function(e){var o=l.props,r=o.closeOnDocumentClick,t=o.closeOnRootNodeClick;if(l.rootNode&&l.portalNode&&!(0,c.default)(l,\"triggerNode.contains\",e.target)&&!(0,c.default)(l,\"portalNode.contains\",e.target)){var n=l.rootNode.contains(e.target);(r&&!n||t&&n)&&l.close(e)}},l.handleEscape=function(e){l.props.closeOnEscape&&T.keyboardKey.getCode(e)===T.keyboardKey.Escape&&l.close(e)},l.handlePortalMouseLeave=function(e){var o=l.props,r=o.closeOnPortalMouseLeave,t=o.mouseLeaveDelay;r&&(l.mouseLeaveTimer=l.closeWithTimeout(e,t))},l.handlePortalMouseEnter=function(){l.props.closeOnPortalMouseLeave&&clearTimeout(l.mouseLeaveTimer)},l.handleTriggerBlur=function(e){for(var o=arguments.length,r=Array(o>1?o-1:0),t=1;t<o;t++)r[t-1]=arguments[t];var n=l.props,a=n.trigger,u=n.closeOnTriggerBlur;c.default.apply(void 0,[a,\"props.onBlur\",e].concat(r));var s=(0,c.default)(l,\"rootNode.contains\",e.relatedTarget);u&&!s&&l.close(e)},l.handleTriggerClick=function(e){for(var o=arguments.length,r=Array(o>1?o-1:0),t=1;t<o;t++)r[t-1]=arguments[t];var n=l.props,a=n.trigger,u=n.closeOnTriggerClick,s=n.openOnTriggerClick,i=l.state.open;c.default.apply(void 0,[a,\"props.onClick\",e].concat(r)),i&&u?l.close(e):!i&&s&&l.open(e)},l.handleTriggerFocus=function(e){for(var o=arguments.length,r=Array(o>1?o-1:0),t=1;t<o;t++)r[t-1]=arguments[t];var n=l.props,a=n.trigger,u=n.openOnTriggerFocus;c.default.apply(void 0,[a,\"props.onFocus\",e].concat(r)),u&&l.open(e)},l.handleTriggerMouseLeave=function(e){for(var o=arguments.length,r=Array(o>1?o-1:0),t=1;t<o;t++)r[t-1]=arguments[t];clearTimeout(l.mouseEnterTimer);var n=l.props,a=n.trigger,u=n.closeOnTriggerMouseLeave,s=n.mouseLeaveDelay;c.default.apply(void 0,[a,\"props.onMouseLeave\",e].concat(r)),u&&(l.mouseLeaveTimer=l.closeWithTimeout(e,s))},l.handleTriggerMouseEnter=function(e){for(var o=arguments.length,r=Array(o>1?o-1:0),t=1;t<o;t++)r[t-1]=arguments[t];clearTimeout(l.mouseLeaveTimer);var n=l.props,a=n.trigger,u=n.mouseEnterDelay,s=n.openOnTriggerMouseEnter;c.default.apply(void 0,[a,\"props.onMouseEnter\",e].concat(r)),s&&(l.mouseEnterTimer=l.openWithTimeout(e,u))},l.open=function(e){var o=l.props.onOpen;o&&o(e,l.props),l.trySetState({open:!0})},l.openWithTimeout=function(e,r){var t=(0,o.default)({},e);return setTimeout(function(){return l.open(t)},r||0)},l.close=function(e){var o=l.props.onClose;o&&o(e,l.props),l.trySetState({open:!1})},l.closeWithTimeout=function(e,r){var t=(0,o.default)({},e);return setTimeout(function(){return l.close(t)},r||0)},l.mountPortal=function(){if((0,T.isBrowser)()&&!l.rootNode){var e=l.props,o=e.eventPool,r=e.mountNode,t=void 0===r?(0,T.isBrowser)()?document.body:null:r,n=e.prepend;l.rootNode=document.createElement(\"div\"),n?t.insertBefore(l.rootNode,t.firstElementChild):t.appendChild(l.rootNode),T.eventStack.sub(\"click\",l.handleDocumentClick,{pool:o}),T.eventStack.sub(\"keydown\",l.handleEscape,{pool:o}),(0,c.default)(l.props,\"onMount\",null,l.props)}},l.unmountPortal=function(){if((0,T.isBrowser)()&&l.rootNode){var e=l.props.eventPool;f.default.unmountComponentAtNode(l.rootNode),l.rootNode.parentNode.removeChild(l.rootNode),T.eventStack.unsub(\"mouseleave\",l.handlePortalMouseLeave,{pool:e,target:l.portalNode}),T.eventStack.unsub(\"mouseenter\",l.handlePortalMouseEnter,{pool:e,target:l.portalNode}),l.rootNode=null,l.portalNode=null,T.eventStack.unsub(\"click\",l.handleDocumentClick,{pool:e}),T.eventStack.unsub(\"keydown\",l.handleEscape,{pool:e}),(0,c.default)(l.props,\"onUnmount\",null,l.props)}},l.handleRef=function(e){return l.triggerNode=e},a=n,(0,u.default)(l,a)}return(0,l.default)(r,[{key:\"componentDidMount\",value:function(){this.renderPortal()}},{key:\"componentDidUpdate\",value:function(e,o){this.renderPortal(),o.open&&!this.state.open&&this.unmountPortal()}},{key:\"componentWillUnmount\",value:function(){this.unmountPortal(),clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)}},{key:\"renderPortal\",value:function(){var e=this;if(this.state.open){var o=this.props,r=o.children,t=o.className,n=o.eventPool;if(this.mountPortal(),!(0,T.isBrowser)())return null;this.rootNode.className=t||\"\",this.portalNode&&(T.eventStack.unsub(\"mouseleave\",this.handlePortalMouseLeave,{pool:n,target:this.portalNode}),T.eventStack.unsub(\"mouseenter\",this.handlePortalMouseEnter,{pool:n,target:this.portalNode})),f.default.unstable_renderSubtreeIntoContainer(this,h.Children.only(r),this.rootNode,function(){e.portalNode=e.rootNode.firstElementChild,T.eventStack.sub(\"mouseleave\",e.handlePortalMouseLeave,{pool:n,target:e.portalNode}),T.eventStack.sub(\"mouseenter\",e.handlePortalMouseEnter,{pool:n,target:e.portalNode})})}}},{key:\"render\",value:function(){var e=this.props.trigger;return e?v.default.createElement(N.default,{innerRef:this.handleRef},(0,h.cloneElement)(e,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})):null}}]),r}(T.AutoControlledComponent);C.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:\"default\",openOnTriggerClick:!0},C.autoControlledProps=[\"open\"],C._meta={name:\"Portal\",type:T.META.TYPES.ADDON},C.handledProps=[\"children\",\"className\",\"closeOnDocumentClick\",\"closeOnEscape\",\"closeOnPortalMouseLeave\",\"closeOnRootNodeClick\",\"closeOnTriggerBlur\",\"closeOnTriggerClick\",\"closeOnTriggerMouseLeave\",\"defaultOpen\",\"eventPool\",\"mountNode\",\"mouseEnterDelay\",\"mouseLeaveDelay\",\"onClose\",\"onMount\",\"onOpen\",\"onUnmount\",\"open\",\"openOnTriggerClick\",\"openOnTriggerFocus\",\"openOnTriggerMouseEnter\",\"prepend\",\"trigger\"],C.propTypes={},exports.default=C;"},"hash":"30d84593588a73c157c02570edd83049"}