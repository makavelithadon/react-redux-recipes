{"dependencies":[{"name":"babel-runtime/helpers/extends","loc":{"line":1,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":2,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":3,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":4,"column":39}},{"name":"babel-runtime/helpers/inherits","loc":{"line":5,"column":22}},{"name":"lodash/invoke","loc":{"line":6,"column":20}},{"name":"prop-types","loc":{"line":8,"column":22}},{"name":"react","loc":{"line":9,"column":33}},{"name":"../../lib","loc":{"line":11,"column":96}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t=require(\"babel-runtime/helpers/extends\"),e=g(t),o=require(\"babel-runtime/helpers/classCallCheck\"),n=g(o),i=require(\"babel-runtime/helpers/createClass\"),r=g(i),s=require(\"babel-runtime/helpers/possibleConstructorReturn\"),c=g(s),a=require(\"babel-runtime/helpers/inherits\"),u=g(a),p=require(\"lodash/invoke\"),l=g(p),d=require(\"prop-types\"),f=g(d),h=require(\"react\"),m=g(h),k=require(\"../../lib\");function g(t){return t&&t.__esModule?t:{default:t}}var v=function(t){(0,u.default)(o,t);function o(){var t,e,i,r;(0,n.default)(this,o);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return e=i=(0,c.default)(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(a))),i.state={sticky:!1},i.addListeners=function(t){var e=t.scrollContext;k.eventStack.sub(\"resize\",i.handleUpdate,{target:e}),k.eventStack.sub(\"scroll\",i.handleUpdate,{target:e})},i.removeListeners=function(){var t=i.props.scrollContext;k.eventStack.unsub(\"resize\",i.handleUpdate,{target:t}),k.eventStack.unsub(\"scroll\",i.handleUpdate,{target:t})},i.update=function(t){var e=i.state.pushing;if(i.ticking=!1,i.assignRects(),e)return i.didReachStartingPoint()?i.stickToContextTop(t):i.didTouchScreenBottom()?i.stickToScreenBottom(t):i.stickToContextBottom(t);if(i.isOversized()){if(i.contextRect.top>0)return i.stickToContextTop(t);if(i.contextRect.bottom<window.innerHeight)return i.stickToContextBottom(t)}return i.didTouchScreenTop()?i.didReachContextBottom()?i.stickToContextBottom(t):i.stickToScreenTop(t):i.stickToContextTop(t)},i.handleUpdate=function(t){i.ticking||(i.ticking=!0,requestAnimationFrame(function(){return i.update(t)}))},i.assignRects=function(){var t=i.props.context;i.triggerRect=i.triggerRef.getBoundingClientRect(),i.contextRect=(t||document.body).getBoundingClientRect(),i.stickyRect=i.stickyRef.getBoundingClientRect()},i.didReachContextBottom=function(){var t=i.props.offset;return i.stickyRect.height+t>=i.contextRect.bottom},i.didReachStartingPoint=function(){return i.stickyRect.top<=i.triggerRect.top},i.didTouchScreenTop=function(){return i.triggerRect.top<i.props.offset},i.didTouchScreenBottom=function(){var t=i.props.bottomOffset;return i.contextRect.bottom+t>window.innerHeight},i.isOversized=function(){return i.stickyRect.height>window.innerHeight},i.pushing=function(t){i.props.pushing&&i.setState({pushing:t})},i.stick=function(t){i.setState({sticky:!0}),(0,l.default)(i.props,\"onStick\",t,i.props)},i.unstick=function(t){i.setState({sticky:!1}),(0,l.default)(i.props,\"onUnstick\",t,i.props)},i.stickToContextBottom=function(t){var e=i.contextRect.bottom-i.stickyRect.height;(0,l.default)(i.props,\"onBottom\",t,i.props),i.stick(t),i.setState({top:e,bottom:null}),i.pushing(!0)},i.stickToContextTop=function(t){(0,l.default)(i.props,\"onTop\",t,i.props),i.unstick(t),i.pushing(!1)},i.stickToScreenBottom=function(t){var e=i.props.bottomOffset;i.stick(t),i.setState({bottom:e,top:null})},i.stickToScreenTop=function(t){var e=i.props.offset;i.stick(t),i.setState({top:e,bottom:null})},i.handleStickyRef=function(t){return i.stickyRef=t},i.handleTriggerRef=function(t){return i.triggerRef=t},r=e,(0,c.default)(i,r)}return(0,r.default)(o,[{key:\"componentDidMount\",value:function(){if((0,k.isBrowser)()){this.props.active&&(this.handleUpdate(),this.addListeners(this.props))}}},{key:\"componentWillReceiveProps\",value:function(t){var e=this.props.active,o=t.active;if(e!==o){if(o)return this.handleUpdate(),void this.addListeners(t);this.removeListeners(),this.setState({sticky:!1})}}},{key:\"componentWillUnmount\",value:function(){if((0,k.isBrowser)()){this.props.active&&this.removeListeners()}}},{key:\"computeStyle\",value:function(){var t=this.state,e=t.bottom,o=t.sticky,n=t.top;return o?{bottom:e,top:n,position:\"fixed\",width:this.triggerRect.width}:{}}},{key:\"render\",value:function(){var t=this.props,n=t.children,i=t.className,r=(0,k.getUnhandledProps)(o,this.props),s=(0,k.getElementType)(o,this.props);return m.default.createElement(s,(0,e.default)({},r,{className:i}),m.default.createElement(\"div\",{ref:this.handleTriggerRef}),m.default.createElement(\"div\",{ref:this.handleStickyRef,style:this.computeStyle()},n))}}]),o}(h.Component);v.defaultProps={active:!0,bottomOffset:0,offset:0,scrollContext:(0,k.isBrowser)()?window:null},v._meta={name:\"Sticky\",type:k.META.TYPES.MODULE},v.handledProps=[\"active\",\"as\",\"bottomOffset\",\"children\",\"className\",\"context\",\"offset\",\"onBottom\",\"onStick\",\"onTop\",\"onUnstick\",\"pushing\",\"scrollContext\"],exports.default=v,v.propTypes={};"},"hash":"a7b6d05c57af09a48c2dd1d41b77fd38"}