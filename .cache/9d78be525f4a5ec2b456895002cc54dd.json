{"dependencies":[{"name":"babel-runtime/helpers/slicedToArray","loc":{"line":1,"column":27}},{"name":"babel-runtime/helpers/objectWithoutProperties","loc":{"line":2,"column":37}},{"name":"babel-runtime/helpers/extends","loc":{"line":3,"column":21}},{"name":"babel-runtime/helpers/classCallCheck","loc":{"line":4,"column":28}},{"name":"babel-runtime/helpers/createClass","loc":{"line":5,"column":25}},{"name":"babel-runtime/helpers/possibleConstructorReturn","loc":{"line":6,"column":39}},{"name":"babel-runtime/helpers/get","loc":{"line":7,"column":18}},{"name":"babel-runtime/helpers/inherits","loc":{"line":8,"column":22}},{"name":"lodash/isEmpty","loc":{"line":9,"column":21}},{"name":"lodash/partialRight","loc":{"line":10,"column":26}},{"name":"lodash/inRange","loc":{"line":11,"column":21}},{"name":"lodash/map","loc":{"line":12,"column":17}},{"name":"lodash/get","loc":{"line":13,"column":17}},{"name":"lodash/reduce","loc":{"line":14,"column":20}},{"name":"lodash/invoke","loc":{"line":15,"column":20}},{"name":"lodash/without","loc":{"line":16,"column":21}},{"name":"classnames","loc":{"line":17,"column":15}},{"name":"prop-types","loc":{"line":19,"column":22}},{"name":"react","loc":{"line":20,"column":18}},{"name":"../../lib","loc":{"line":22,"column":242}},{"name":"../../elements/Input","loc":{"line":23,"column":18}},{"name":"./SearchCategory","loc":{"line":24,"column":27}},{"name":"./SearchResult","loc":{"line":25,"column":25}},{"name":"./SearchResults","loc":{"line":26,"column":26}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"babel-runtime/helpers/slicedToArray\"),t=Y(e),n=require(\"babel-runtime/helpers/objectWithoutProperties\"),s=Y(n),l=require(\"babel-runtime/helpers/extends\"),o=Y(l),r=require(\"babel-runtime/helpers/classCallCheck\"),a=Y(r),u=require(\"babel-runtime/helpers/createClass\"),i=Y(u),c=require(\"babel-runtime/helpers/possibleConstructorReturn\"),d=Y(c),p=require(\"babel-runtime/helpers/get\"),h=Y(p),f=require(\"babel-runtime/helpers/inherits\"),v=Y(f),m=require(\"lodash/isEmpty\"),y=Y(m),g=require(\"lodash/partialRight\"),S=Y(g),k=require(\"lodash/inRange\"),b=Y(k),R=require(\"lodash/map\"),C=Y(R),O=require(\"lodash/get\"),w=Y(O),D=require(\"lodash/reduce\"),q=Y(D),E=require(\"lodash/invoke\"),I=Y(E),M=require(\"lodash/without\"),K=Y(M),P=require(\"classnames\"),N=Y(P),T=require(\"prop-types\"),_=Y(T),x=require(\"react\"),F=Y(x),V=require(\"../../lib\"),B=require(\"../../elements/Input\"),U=Y(B),A=require(\"./SearchCategory\"),H=Y(A),W=require(\"./SearchResult\"),j=Y(W),z=require(\"./SearchResults\"),L=Y(z);function Y(e){return e&&e.__esModule?e:{default:e}}var G=function(e){(0,v.default)(n,e);function n(){var e,t,l,r;(0,a.default)(this,n);for(var u=arguments.length,i=Array(u),c=0;c<u;c++)i[c]=arguments[c];return t=l=(0,d.default)(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),l.handleResultSelect=function(e,t){(0,I.default)(l.props,\"onResultSelect\",e,(0,o.default)({},l.props,{result:t}))},l.handleSelectionChange=function(e){var t=l.getSelectedResult();(0,I.default)(l.props,\"onSelectionChange\",e,(0,o.default)({},l.props,{result:t}))},l.closeOnEscape=function(e){V.keyboardKey.getCode(e)===V.keyboardKey.Escape&&(e.preventDefault(),l.close())},l.moveSelectionOnKeyDown=function(e){switch(V.keyboardKey.getCode(e)){case V.keyboardKey.ArrowDown:e.preventDefault(),l.moveSelectionBy(e,1);break;case V.keyboardKey.ArrowUp:e.preventDefault(),l.moveSelectionBy(e,-1)}},l.selectItemOnEnter=function(e){if(V.keyboardKey.getCode(e)===V.keyboardKey.Enter){var t=l.getSelectedResult();t&&(e.preventDefault(),l.setValue(t.title),l.handleResultSelect(e,t),l.close())}},l.closeOnDocumentClick=function(e){l.close()},l.handleMouseDown=function(e){l.isMouseDown=!0,(0,I.default)(l.props,\"onMouseDown\",e,l.props),V.eventStack.sub(\"mouseup\",l.handleDocumentMouseUp)},l.handleDocumentMouseUp=function(){l.isMouseDown=!1,V.eventStack.unsub(\"mouseup\",l.handleDocumentMouseUp)},l.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),l.tryOpen()},l.handleItemClick=function(e,t){var n=t.id,s=l.getSelectedResult(n);e.nativeEvent.stopImmediatePropagation(),l.setValue(s.title),l.handleResultSelect(e,s),l.close()},l.handleFocus=function(e){var t=l.props.onFocus;t&&t(e,l.props),l.setState({focus:!0})},l.handleBlur=function(e){var t=l.props.onBlur;t&&t(e,l.props),l.setState({focus:!1})},l.handleSearchChange=function(e){e.stopPropagation();var t=l.props.minCharacters,n=l.state.open,s=e.target.value;(0,I.default)(l.props,\"onSearchChange\",e,(0,o.default)({},l.props,{value:s})),s.length<t?l.close():n||l.tryOpen(s),l.setValue(s)},l.getFlattenedResults=function(){var e=l.props,t=e.category,n=e.results;return t?(0,q.default)(n,function(e,t){return e.concat(t.results)},[]):n},l.getSelectedResult=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.state.selectedIndex,t=l.getFlattenedResults();return(0,w.default)(t,e)},l.setValue=function(e){var t=l.props.selectFirstResult;l.trySetState({value:e},{selectedIndex:t?0:-1})},l.moveSelectionBy=function(e,t){var n=l.state.selectedIndex,s=l.getFlattenedResults().length-1,o=n+t;o>s?o=0:o<0&&(o=s),l.setState({selectedIndex:o}),l.scrollSelectedItemIntoView(),l.handleSelectionChange(e)},l.scrollSelectedItemIntoView=function(){if((0,V.isBrowser)()){var e=document.querySelector(\".ui.search.active.visible .results.visible\"),t=e.querySelector(\".result.active\");if(t){var n=t.offsetTop<e.scrollTop,s=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:s&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}},l.tryOpen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.state.value,t=l.props.minCharacters;e.length<t||l.open()},l.open=function(){l.trySetState({open:!0})},l.close=function(){l.trySetState({open:!1})},l.renderSearchInput=function(e){var t=l.props,n=t.icon,s=t.input,r=l.state.value;return U.default.create(s,{defaultProps:(0,o.default)({},e,{icon:n,input:{className:\"prompt\",tabIndex:\"0\",autoComplete:\"off\"},onChange:l.handleSearchChange,onClick:l.handleInputClick,value:r})})},l.renderNoResults=function(){var e=l.props,t=e.noResultsDescription,n=e.noResultsMessage;return F.default.createElement(\"div\",{className:\"message empty\"},F.default.createElement(\"div\",{className:\"header\"},n),t&&F.default.createElement(\"div\",{className:\"description\"},t))},l.renderResult=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e.childKey,u=(0,s.default)(e,[\"childKey\"]),i=l.props.resultRenderer,c=l.state.selectedIndex,d=t+r;return F.default.createElement(j.default,(0,o.default)({key:a||u.title,active:c===d,onClick:l.handleItemClick,renderer:i},u,{id:d}))},l.renderResults=function(){var e=l.props.results;return(0,C.default)(e,l.renderResult)},l.renderCategories=function(){var e=l.props,t=e.categoryRenderer,n=e.results,r=l.state.selectedIndex,a=0;return(0,C.default)(n,function(e){var n=e.childKey,u=(0,s.default)(e,[\"childKey\"]),i=(0,o.default)({key:n||u.name,active:(0,b.default)(r,a,a+u.results.length),renderer:t},u),c=(0,S.default)(l.renderResult,a);return a+=u.results.length,F.default.createElement(H.default,i,u.results.map(c))})},l.renderMenuContent=function(){var e=l.props,t=e.category,n=e.showNoResults,s=e.results;return(0,y.default)(s)?n?l.renderNoResults():null:t?l.renderCategories():l.renderResults()},l.renderResultsMenu=function(){var e=l.state.open?\"visible\":\"\",t=l.renderMenuContent();if(t)return F.default.createElement(L.default,{className:e},t)},r=t,(0,d.default)(l,r)}return(0,i.default)(n,[{key:\"componentWillMount\",value:function(){var e=this.state,t=e.open,n=e.value;this.setValue(n),t&&this.open()}},{key:\"componentWillReceiveProps\",value:function(e){(0,h.default)(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),\"componentWillReceiveProps\",this).call(this,e),(0,V.shallowEqual)(e.value,this.props.value)||this.setValue(e.value)}},{key:\"shouldComponentUpdate\",value:function(e,t){return!(0,V.shallowEqual)(e,this.props)||!(0,V.shallowEqual)(t,this.state)}},{key:\"componentDidUpdate\",value:function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&V.eventStack.sub(\"keydown\",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),V.eventStack.unsub(\"keydown\",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),V.eventStack.sub(\"click\",this.closeOnDocumentClick),V.eventStack.sub(\"keydown\",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),V.eventStack.unsub(\"click\",this.closeOnDocumentClick),V.eventStack.unsub(\"keydown\",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))}},{key:\"componentWillUnmount\",value:function(){V.eventStack.unsub(\"click\",this.closeOnDocumentClick),V.eventStack.unsub(\"keydown\",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])}},{key:\"render\",value:function(){var e=this.state,s=e.searchClasses,l=e.focus,r=e.open,a=this.props,u=a.aligned,i=a.category,c=a.className,d=a.fluid,p=a.loading,h=a.size,f=(0,N.default)(\"ui\",r&&\"active visible\",h,s,(0,V.useKeyOnly)(i,\"category\"),(0,V.useKeyOnly)(l,\"focus\"),(0,V.useKeyOnly)(d,\"fluid\"),(0,V.useKeyOnly)(p,\"loading\"),(0,V.useValueAndKey)(u,\"aligned\"),\"search\",c),v=(0,V.getUnhandledProps)(n,this.props),m=(0,V.getElementType)(n,this.props),y=(0,V.partitionHTMLProps)(v,{htmlProps:V.htmlInputAttrs}),g=(0,t.default)(y,2),S=g[0],k=g[1];return F.default.createElement(m,(0,o.default)({},k,{className:f,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(S),this.renderResultsMenu())}}]),n}(V.AutoControlledComponent);G.defaultProps={icon:\"search\",input:\"text\",minCharacters:1,noResultsMessage:\"No results found.\",showNoResults:!0},G.autoControlledProps=[\"open\",\"value\"],G._meta={name:\"Search\",type:V.META.TYPES.MODULE},G.Category=H.default,G.Result=j.default,G.Results=L.default,G.handledProps=[\"aligned\",\"as\",\"category\",\"categoryRenderer\",\"className\",\"defaultOpen\",\"defaultValue\",\"fluid\",\"icon\",\"input\",\"loading\",\"minCharacters\",\"noResultsDescription\",\"noResultsMessage\",\"onBlur\",\"onFocus\",\"onMouseDown\",\"onResultSelect\",\"onSearchChange\",\"onSelectionChange\",\"open\",\"resultRenderer\",\"results\",\"selectFirstResult\",\"showNoResults\",\"size\",\"value\"],exports.default=G,G.propTypes={};"},"hash":"82ca8671d361eef1e125ad33a711ef14"}